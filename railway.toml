# Railway deployment configuration for MyWorkDay
# https://docs.railway.app/reference/config-as-code

[build]
builder = "NIXPACKS"
buildCommand = "npm run build"

[deploy]
startCommand = "node server/scripts/deploy-smoke.cjs && npm run start"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Note: Migrations run automatically on startup when AUTO_MIGRATE=true
# Required environment variables:
#   AUTO_MIGRATE=true
#   FAIL_ON_SCHEMA_ISSUES=true
#   SESSION_SECRET=<random 32+ chars>
#   DATABASE_URL (auto-set by Railway PostgreSQL plugin)
